<ion-content class="ion-padding">

  <app-metadata-details translucent="true" [data]="cardMetaData">
    <div class="sb-dt-card-actions">
      <div class="wrapper">
        <app-metadata-actions (actionEvent)="onAction($event)" [actionItems]="projectActions"></app-metadata-actions>
      </div>

      <div class="sb-course-progress-container"
        *ngIf="projectDetails?.status?.length &&  projectDetails?.status !== allStatusTypes.submitted">
        <p><strong>{{'YOUR_PROGRESS_LABEL' | translate}}</strong>
        </p>
        <p>{{projectCompletionPercent?.completedTasks}} / {{projectCompletionPercent?.totalTasks}} {{'COMPLETED' |
          translate}}
        </p>
        <ion-progress-bar
          [ngStyle]="{'--progress-background' : projectProgress?.completedTasks == taskCount ? 'var(--app-green)' : 'var(--app-quaternary-medium)'}"
          [value]="projectCompletionPercent?.completedTasks/projectCompletionPercent?.totalTasks"
          class="progress-bar-style"></ion-progress-bar>
      </div>

    </div>
    <ion-button (click)="submitImprovment()"
      *ngIf="projectDetails?.status && projectDetails?.status !== allStatusTypes.submitted"
      expand="block" class="ion-text-capitalize ion-margin-top"
      [ngClass]="{'button-disabled':(projectCompletionPercent?.completedTasks/projectCompletionPercent?.totalTasks)<1)}"
      [disabled]="(projectCompletionPercent?.completedTasks/projectCompletionPercent?.totalTasks)<1">
      {{'FRMELEMNTS_LBL_SUBMIT_IMPROVEMENT' | translate}}
    </ion-button>
  </app-metadata-details>

  <div class="project-segments">
    <ion-segment [(ngModel)]="segmentType" (ionChange)="segmentChanged($event)" class="segment-card">
      <ion-segment-button value="details" class="flex-5">
        <ion-label class="font-12 text-transform-none">{{'FRMELEMNTS_LBL_PROJECT_DETAILS' | translate }}</ion-label>
      </ion-segment-button>
      <div class="hr-div">
        <hr class="hr-height">
      </div>
      <ion-segment-button value="tasks" class="flex-5">
        <ion-label class="font-12 text-transform-none">{{'FRMELEMNTS_LBL_TASK_DETAILS' | translate }}
        </ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>
  <div *ngIf="segmentType == 'details'">
    <app-project-details-card [data]="projectDetails">
    </app-project-details-card>
    <app-accordion-list [data]="projectDetails?.learningResources" (actionEvent)="openResource($event)"
      [title]="'FRMELEMNTS_LBL_LEARNING_RESOURCES'" *ngIf="projectDetails?.learningResources?.length">
    </app-accordion-list>
  </div>

  <app-task-card *ngIf="segmentType == 'tasks'" [data]="projectDetails"></app-task-card>
</ion-content>