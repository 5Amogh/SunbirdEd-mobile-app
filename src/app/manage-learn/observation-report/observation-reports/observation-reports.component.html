<ion-content>
  <div *ngIf="!error">
    <h3 *ngIf="reportObj?.entityName" class="heading">
      {{ reportObj?.entityName }}
    </h3>

    <h4 class="reportName">{{ reportObj?.observationName }} {{ reportObj?.solutionName }}</h4>

    <!-- ------------------------------------------ -->
    <div padding *ngIf="!from">
      <ion-segment [(ngModel)]="selectedTab">
        <ion-segment-button value="questionwise" (click)="onTabChange('questionwise')">
          {{ 'FRMELEMNTS_LBL_QUESTION_WISE' | translate }}
        </ion-segment-button>
        <ion-segment-button value="criteriawise" (click)="onTabChange('criteriawise')">
          {{ 'FRMELEMNTS_LBL_CRITERIA_WISE' | translate }}
        </ion-segment-button>
      </ion-segment>
    </div>
    <div [ngSwitch]="selectedTab">
      <div *ngSwitchCase="'questionwise'">
        <div *ngIf="allQuestions?.length && !from" class="d-flex flex-jc-flex-end">
          <ion-button ion-button icon-start (click)="openFilter()" margin>
            <ion-icon name="options"></ion-icon>
            {{ 'FRMELEMNTS_BTN_FILTER' | translate }}
          </ion-button>
        </div>
        <!-- Scores details bar ends here-->

        <div *ngFor="let element of reportObj?.response; let i = index">
          <ion-card [ngSwitch]="element?.responseType">
            <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'text'"></reports-text>
            <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'number'"></reports-text>
            <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'date'"></reports-text>
            <pie-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'radio'"></pie-chart>
            <bar-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'multiselect'"></bar-chart>
            <matrix-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'matrix'"></matrix-chart>
            <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchDefault></reports-text>
          </ion-card>
          <ion-grid>
            <ion-row>
              <ion-col size="4" *ngFor="let e of element.evidences">
                <attachments [url]="e.url" [extension]="e.extension"></attachments>
              </ion-col>
              <ion-col size="12" *ngIf="element.evidence_count > 3">
                <small class="pull-right text-ios-danger" (click)="allEvidence(i)">{{
                  'FRMELEMNTS_LBL_VIEW_ALL_EVIDNECES' | translate
                }}</small>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </div>

      <div *ngSwitchCase="'criteriawise'">
        <div *ngIf="allCriterias?.length" class="d-flex flex-jc-flex-end">
          <ion-button ion-button icon-start (click)="openCriteriaFilter()" margin>
            <ion-icon name="options"></ion-icon>
            {{ 'FRMELEMNTS_BTN_FILTER' | translate }}
          </ion-button>
        </div>
        <div *ngFor="let criteria of reportObjCriteria?.response">
          <ion-card-content>
            <h3>{{ criteria.criteriaName }}</h3>
          </ion-card-content>
          <div *ngFor="let element of criteria.questionArray; let i = index">
            <ion-card [ngSwitch]="element?.responseType">
              <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'text'"></reports-text>
              <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'number'"></reports-text>
              <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'date'"></reports-text>
              <pie-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'radio'"></pie-chart>
              <bar-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'multiselect'"></bar-chart>
              <matrix-chart [data]="element" [questionNumber]="i + 1" *ngSwitchCase="'matrix'"></matrix-chart>
              <reports-text [data]="element" [questionNumber]="i + 1" *ngSwitchDefault></reports-text>
            </ion-card>
            <ion-grid>
              <ion-row>
                <ion-col size="4" *ngFor="let e of element.evidences">
                  <attachments [url]="e.url" [extension]="e.extension"></attachments>
                </ion-col>
                <ion-col size="12" *ngIf="element.evidence_count > 3">
                  <small class="pull-right text-ios-danger" (click)="allEvidence(i)">{{
                    'FRMELEMNTS_LBL_VIEW_ALL_EVIDNECES' | translate
                  }}</small>
                </ion-col>
              </ion-row>
            </ion-grid>
          </div>
        </div>
      </div>
    </div>

    <!-- ---------------------------------------------------- -->
  </div>
  <div class="_flex-box _justify-content-center _errorBox" *ngIf="!reportObj?.response">
    {{ reportObj?.data }}
  </div>

  <ion-fab vertical="bottom" horizontal="end" *ngIf="reportObj?.response" #fab slot="fixed">
    <ion-fab-button size="small">
      <ion-icon name="ellipsis-vertical"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="start">
      <ion-fab-button (click)="downloadSharePdf('download')">
        <ion-icon name="download"></ion-icon>
      </ion-fab-button>
      <ion-fab-button (click)="downloadSharePdf('share')">
        <ion-icon name="share"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>
</ion-content>
